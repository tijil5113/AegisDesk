<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Editor | Aegis Desk</title>
    <link rel="stylesheet" href="styles/code-editor-ide.css">
    <link rel="preconnect" href="https://unpkg.com">
</head>
<body data-theme="dark-pro">
    <!-- Intro / Instructions page -->
    <div id="ide-onboarding" class="intro-page">
        <div class="intro-background">
            <div class="intro-gradient"></div>
            <div class="intro-grid"></div>
            <div class="intro-glow intro-glow-1"></div>
            <div class="intro-glow intro-glow-2"></div>
        </div>
        <div class="intro-content">
            <header class="intro-header">
                <a href="desktop.html" class="intro-back-btn" title="Back to Desktop">‚Üê Desktop</a>
            </header>
            <section class="intro-hero">
                <div class="intro-logo">
                    <span class="intro-logo-icon">{ }</span>
                </div>
                <h1 class="intro-title">Code Editor</h1>
                <p class="intro-tagline">VS Code‚Äìlevel IDE. Run in your browser. No setup.</p>
            </section>
            <section class="intro-steps">
                <h2 class="intro-section-title">Get started in 3 steps</h2>
                <div class="intro-step-cards">
                    <div class="intro-step-card">
                        <span class="intro-step-num">1</span>
                        <h3>Create or open files</h3>
                        <p>Use the Explorer sidebar to create files, folders, or upload from your computer.</p>
                    </div>
                    <div class="intro-step-card">
                        <span class="intro-step-num">2</span>
                        <h3>Write & run code</h3>
                        <p>JavaScript, Python, HTML, CSS, and more. Press <kbd>Ctrl+Enter</kbd> to run instantly.</p>
                    </div>
                    <div class="intro-step-card">
                        <span class="intro-step-num">3</span>
                        <h3>Use AI & preview</h3>
                        <p>AI sidebar for help. Live preview for HTML/CSS. Output in the panel below.</p>
                    </div>
                </div>
            </section>
            <section class="intro-features">
                <div class="intro-feature">
                    <span class="intro-feature-icon">‚óá</span>
                    <span>Monaco editor ¬∑ IntelliSense ¬∑ Multi-cursor</span>
                </div>
                <div class="intro-feature">
                    <span class="intro-feature-icon">‚óá</span>
                    <span>14 themes ¬∑ Command palette <kbd>Ctrl+Shift+P</kbd></span>
                </div>
                <div class="intro-feature">
                    <span class="intro-feature-icon">‚óá</span>
                    <span>Terminal ¬∑ Format ¬∑ Find & Replace</span>
                </div>
            </section>
            <section class="intro-actions">
                <button type="button" id="onboarding-start" class="intro-cta">
                    <span class="intro-cta-text">Enter IDE</span>
                    <span class="intro-cta-arrow">‚Üí</span>
                </button>
                <p class="intro-hint">You can revisit this intro from the command palette</p>
            </section>
        </div>
        <div class="intro-scroll-hint" aria-hidden="true">Scroll for more</div>
    </div>

    <!-- Main IDE -->
    <div id="ide-root" class="ide-root" style="display: none;">
        <aside class="ide-sidebar" id="ide-sidebar">
            <div class="ide-sidebar-views">
                <button type="button" class="ide-sidebar-view active" data-view="explorer" title="Explorer">üìÅ</button>
                <button type="button" class="ide-sidebar-view" data-view="search" title="Search">üîç</button>
                <button type="button" class="ide-sidebar-view" data-view="ai" title="AI Chat">ü§ñ</button>
            </div>
            <div class="ide-sidebar-content">
                <!-- Explorer -->
                <div id="ide-view-explorer" class="ide-view active">
                    <div class="ide-sidebar-header">
                        <span class="ide-sidebar-title">EXPLORER</span>
                        <div class="ide-sidebar-actions">
                            <button type="button" class="ide-btn icon-btn" id="ide-new-file" title="New file (Ctrl+N)">+</button>
                            <button type="button" class="ide-btn icon-btn" id="ide-new-folder" title="New folder">üìÅ</button>
                            <input type="file" id="ide-upload-input" multiple style="display:none">
                            <button type="button" class="ide-btn icon-btn" id="ide-upload-btn" title="Upload files">‚Üë</button>
                        </div>
                    </div>
                    <div class="ide-tree" id="ide-file-tree"></div>
                </div>
                <!-- Search -->
                <div id="ide-view-search" class="ide-view">
                    <div class="ide-sidebar-header">
                        <span class="ide-sidebar-title">SEARCH</span>
                    </div>
                    <div class="ide-search-box">
                        <input type="text" id="ide-search-input" placeholder="Search in files...">
                        <button type="button" class="ide-btn" id="ide-search-btn">Search</button>
                    </div>
                    <div class="ide-search-results" id="ide-search-results"></div>
                </div>
                <!-- AI Chat -->
                <div id="ide-view-ai" class="ide-view">
                    <div class="ide-sidebar-header">
                        <span class="ide-sidebar-title">AI ASSISTANT</span>
                    </div>
                    <div class="ide-ai-panel">
                        <div class="ide-ai-welcome" id="ide-ai-welcome">
                            <p class="ide-ai-welcome-text">Hi! I'm your coding assistant. I can explain code, fix bugs, improve performance, refactor, generate projects, and answer technical questions. How can I help?</p>
                            <div class="ide-ai-suggestions" id="ide-ai-suggestions">
                                <button type="button" class="ide-ai-suggestion-btn" data-suggestion="Explain my code">Explain my code</button>
                                <button type="button" class="ide-ai-suggestion-btn" data-suggestion="Fix errors in my code">Fix errors</button>
                                <button type="button" class="ide-ai-suggestion-btn" data-suggestion="Improve performance of my code">Improve performance</button>
                                <button type="button" class="ide-ai-suggestion-btn" data-suggestion="Generate a small project from scratch">Generate project</button>
                            </div>
                        </div>
                        <div class="ide-ai-messages" id="ide-ai-messages"></div>
                        <div class="ide-ai-typing" id="ide-ai-typing" style="display:none">
                            <span class="ide-ai-typing-dot"></span>
                            <span class="ide-ai-typing-dot"></span>
                            <span class="ide-ai-typing-dot"></span>
                            <span class="ide-ai-typing-label">Thinking...</span>
                        </div>
                        <div class="ide-ai-input-wrap">
                            <textarea id="ide-ai-input" placeholder="Ask anything: explain, fix, optimize, generate..." rows="2"></textarea>
                            <button type="button" class="ide-btn ide-ai-send-btn" id="ide-ai-send">Send</button>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
        <div class="ide-main">
            <div class="ide-toolbar">
                <a href="desktop.html" class="ide-btn ide-back-btn" title="Back to Desktop">‚Üê Desktop</a>
                <button type="button" class="ide-btn ide-intro-btn" id="ide-intro-btn" title="View Intro & Instructions">Intro</button>
                <span class="ide-toolbar-sep"></span>
                <button type="button" class="ide-btn" id="ide-new-btn">New</button>
                <button type="button" class="ide-btn" id="ide-open-btn">Open</button>
                <input type="file" id="ide-open-input" multiple style="display:none">
                <button type="button" class="ide-btn" id="ide-save-btn">Save</button>
                <button type="button" class="ide-btn" id="ide-saveas-btn">Save As</button>
                <button type="button" class="ide-btn" id="ide-download-btn">Download</button>
                <span class="ide-toolbar-sep"></span>
                <button type="button" class="ide-btn" id="ide-run-btn" title="Run (Ctrl+Enter)">‚ñ∂ Run</button>
                <button type="button" class="ide-btn" id="ide-format-btn">Format</button>
                <span class="ide-toolbar-sep"></span>
                <button type="button" class="ide-btn ide-preview-toggle" id="ide-preview-show-btn" title="Show Live Preview">Show Preview</button>
                <button type="button" class="ide-btn ide-preview-toggle" id="ide-preview-hide-btn" title="Hide Live Preview" style="display:none">Hide Preview</button>
                <button type="button" class="ide-btn" id="ide-preview-refresh-btn" title="Refresh Preview" style="display:none">Refresh</button>
                <span class="ide-toolbar-sep"></span>
                <div class="ide-ai-wrap">
                    <button type="button" class="ide-btn" id="ide-ai-btn" title="AI actions">AI ‚ñæ</button>
                    <div id="ide-ai-menu" class="ide-ai-menu" style="display: none;">
                        <button type="button" data-ai="explain">Explain code</button>
                        <button type="button" data-ai="fix">Fix bugs</button>
                        <button type="button" data-ai="optimize">Optimize</button>
                        <button type="button" data-ai="comment">Add comments</button>
                        <button type="button" data-ai="generate">Generate from prompt</button>
                        <button type="button" data-ai="convert">English ‚Üí Code</button>
                    </div>
                </div>
                <button type="button" class="ide-btn" id="ide-export-zip-btn">Export ZIP</button>
            </div>
            <div class="ide-tabs" id="ide-tabs"></div>
            <div class="ide-editor-row" id="ide-editor-row">
                <div class="ide-editor-area" id="ide-editor-area">
                    <div id="monaco-container" class="ide-monaco-container"></div>
                </div>
                <div class="ide-resizer ide-resizer-preview" id="ide-resizer-preview" title="Drag to resize" style="display:none"></div>
                <div class="ide-preview-wrap" id="ide-preview-wrap" style="display:none">
                    <div class="ide-preview-header">
                        <span class="ide-preview-title">Live Preview</span>
                        <span class="ide-preview-status" id="ide-preview-status"></span>
                    </div>
                    <iframe id="ide-live-preview-frame" class="ide-live-preview-frame" title="Live Preview" sandbox="allow-scripts allow-same-origin"></iframe>
                </div>
            </div>
            <div class="ide-panel ide-panel-bottom" id="ide-bottom-panel">
                <div class="ide-resizer ide-resizer-panel" id="ide-resizer-panel" title="Drag to resize panel"></div>
                <div class="ide-panel-tabs">
                    <button type="button" class="ide-panel-tab active" data-panel="output">Output</button>
                    <button type="button" class="ide-panel-tab" data-panel="console">Console</button>
                    <button type="button" class="ide-panel-tab" data-panel="terminal">Terminal</button>
                    <button type="button" class="ide-panel-tab" data-panel="problems">Problems</button>
                </div>
                <div class="ide-panel-content" id="ide-output">
                    <pre id="ide-output-pre"></pre>
                </div>
                <div class="ide-panel-content" id="ide-console" style="display: none;">
                    <pre id="ide-console-pre"></pre>
                </div>
                <div class="ide-panel-content" id="ide-terminal" style="display: none;">
                    <div class="ide-terminal-output" id="ide-terminal-output"></div>
                    <div class="ide-terminal-line">
                        <span class="ide-terminal-prompt" id="ide-terminal-prompt">$ </span>
                        <input type="text" class="ide-terminal-input" id="ide-terminal-input" spellcheck="false">
                    </div>
                </div>
                <div class="ide-panel-content" id="ide-problems" style="display: none;">
                    <div class="ide-problems-list" id="ide-problems-list"></div>
                </div>
            </div>
        </div>
        <div class="ide-statusbar">
            <span id="ide-status-position">Ln 1, Col 1</span>
            <span id="ide-status-language">JavaScript</span>
            <span id="ide-status-eol">LF</span>
            <span id="ide-status-encoding">UTF-8</span>
            <button type="button" class="ide-status-btn" id="ide-theme-btn" title="Change theme">Theme</button>
        </div>
        <!-- Find & Replace -->
        <div id="ide-find-wrap" class="ide-find-wrap" style="display: none;">
            <input type="text" id="ide-find-input" placeholder="Find">
            <input type="text" id="ide-replace-input" placeholder="Replace">
            <button type="button" id="ide-find-prev" title="Previous">‚Üë</button>
            <button type="button" id="ide-find-next" title="Next">‚Üì</button>
            <button type="button" id="ide-find-replace-one" title="Replace">Replace</button>
            <button type="button" id="ide-find-close">√ó</button>
        </div>
        <!-- Command palette -->
        <div id="ide-command-palette" class="ide-command-palette" style="display: none;">
            <input type="text" id="ide-command-input" placeholder="Type a command...">
            <div class="ide-command-list" id="ide-command-list"></div>
        </div>
    </div>

    <script src="https://unpkg.com/monaco-editor@0.44.0/min/vs/loader.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="js/code-editor-ide.js"></script>
</body>
</html>
